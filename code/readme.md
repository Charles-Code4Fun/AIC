This is the code for all the subsystems.
